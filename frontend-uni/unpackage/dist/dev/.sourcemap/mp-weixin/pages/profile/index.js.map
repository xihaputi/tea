{"version":3,"file":"index.js","sources":["pages/profile/index.vue","E:/EDGE‰∏ãËΩΩ/ÂéãÁº©Êñá‰ª∂/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- Header Background -->\n    <view class=\"profile-header\">\n      <view class=\"title-lg text-white\">‰∏™‰∫∫‰∏≠ÂøÉ</view>\n    </view>\n    \n    <view class=\"profile-content\">\n      <!-- User Card -->\n      <view class=\"card user-card\">\n        <view class=\"avatar-box\">\n          <text class=\"avatar-text\">{{ user.name ? user.name[0] : (user.username ? user.username[0] : 'U') }}</text>\n        </view>\n        <view class=\"user-info\">\n          <text class=\"user-name\">{{ user.name || user.username }}</text>\n          <view class=\"user-role-tag\">\n            {{ user.roles ? user.roles.join(', ') : 'ÊôÆÈÄöÁî®Êà∑' }}\n          </view>\n        </view>\n        <view class=\"edit-btn\" @click=\"showToast('ÁºñËæëÂäüËÉΩÂºÄÂèë‰∏≠')\">‚úé</view>\n      </view>\n\n      <!-- Menu List -->\n      <view class=\"card menu-card\">\n        <view class=\"menu-item\" @click=\"showToast('Ë¥¶Âè∑ÂÆâÂÖ®ÂäüËÉΩÂºÄÂèë‰∏≠')\">\n          <view class=\"menu-left\">\n            <text class=\"menu-icon\">üõ°Ô∏è</text>\n            <text class=\"menu-text\">Ë¥¶Âè∑‰∏éÂÆâÂÖ®</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <view class=\"menu-divider\"></view>\n        <view class=\"menu-item\" @click=\"showToast('Á≥ªÁªüËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠')\">\n          <view class=\"menu-left\">\n            <text class=\"menu-icon\">‚öôÔ∏è</text>\n            <text class=\"menu-text\">Á≥ªÁªüËÆæÁΩÆ</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <view class=\"menu-divider\"></view>\n        <view class=\"menu-item\" @click=\"showToast('ÂÖ≥‰∫éÊàë‰ª¨ÂäüËÉΩÂºÄÂèë‰∏≠')\">\n          <view class=\"menu-left\">\n            <text class=\"menu-icon\">‚ÑπÔ∏è</text>\n            <text class=\"menu-text\">ÂÖ≥‰∫éÊàë‰ª¨</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n      </view>\n\n      <button class=\"btn-logout\" @click=\"handleLogout\">ÈÄÄÂá∫ÁôªÂΩï</button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { getUserInfo, logout } from '@/api/auth.js';\n\nexport default {\n  data() {\n    return {\n      user: {}\n    };\n  },\n  onShow() {\n    this.loadUserInfo();\n  },\n  methods: {\n    async loadUserInfo() {\n      // We assume token exists because app forces login\n      try {\n        const res = await getUserInfo();\n        this.user = res;\n      } catch (e) {\n        // If getting user info fails (e.g. 401), HTTP interceptor will handle redirect\n        // But we can also handle it partly here\n      }\n    },\n    async handleLogout() {\n      try {\n        await logout();\n      } catch (e) {}\n      uni.removeStorageSync('token');\n      uni.removeStorageSync('userInfo');\n      \n      // Force redirect to login\n      uni.reLaunch({ url: '/pages/login/index' });\n    },\n    showToast(msg) {\n      uni.showToast({ title: msg, icon: 'none' });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/uni.scss\";\n\n.page-container {\n  padding: 0;\n  background-color: $bg-page;\n  min-height: 100vh;\n}\n\n/* Header with Green Background */\n.profile-header {\n  height: 300rpx;\n  background: linear-gradient(180deg, $primary-dark 0%, $primary 100%);\n  padding: 88rpx 32rpx 0;\n}\n\n.profile-content {\n  padding: 0 32rpx;\n  margin-top: -100rpx; /* Pull up to overlap header */\n  padding-bottom: 40rpx;\n}\n\n/* User Card */\n.user-card {\n  display: flex;\n  align-items: center;\n  padding: 40rpx;\n  margin-bottom: 32rpx;\n}\n\n.avatar-box {\n  width: 120rpx;\n  height: 120rpx;\n  background: $primary-light;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 32rpx;\n  border: 4rpx solid #fff;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.1);\n  \n  &.placeholder {\n    background: #E5E7EB;\n    color: #9CA3AF;\n  }\n}\n\n.avatar-text {\n  font-size: 48rpx;\n  font-weight: 700;\n  color: $primary-dark;\n}\n\n.user-info {\n  flex: 1;\n}\n\n.user-name {\n  font-size: 36rpx;\n  font-weight: 700;\n  color: $text-main;\n  display: block;\n  margin-bottom: 8rpx;\n}\n\n.user-role-tag {\n  display: inline-block;\n  font-size: 22rpx;\n  background: $primary-light;\n  color: $primary-dark;\n  padding: 4rpx 16rpx;\n  border-radius: 999rpx;\n  font-weight: 600;\n}\n\n.user-desc {\n  font-size: 26rpx;\n  color: $text-sub;\n}\n\n.edit-btn {\n  color: $text-sub;\n  font-size: 36rpx;\n  padding: 10rpx;\n}\n\n.login-prompt {\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n\n.login-btn {\n  background: $primary;\n  color: #fff;\n  font-size: 26rpx;\n  padding: 12rpx 32rpx;\n  border-radius: 999rpx;\n  font-weight: 600;\n}\n\n/* Menu List */\n.menu-card {\n  padding: 0 32rpx;\n}\n\n.menu-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 36rpx 0;\n  \n  &:active { opacity: 0.7; }\n}\n\n.menu-left {\n  display: flex;\n  align-items: center;\n}\n\n.menu-icon {\n  font-size: 36rpx;\n  margin-right: 24rpx;\n  width: 48rpx;\n  text-align: center;\n}\n\n.menu-text {\n  font-size: 30rpx;\n  color: $text-main;\n  font-weight: 500;\n}\n\n.menu-arrow {\n  color: #D1D5DB;\n  font-size: 40rpx;\n  line-height: 1;\n}\n\n.menu-divider {\n  height: 2rpx;\n  background: #F3F4F6;\n}\n\n/* Logout Button */\n.btn-logout {\n  margin-top: 48rpx;\n  background: #fff;\n  color: #EF4444;\n  font-size: 30rpx;\n  font-weight: 600;\n  border-radius: 20rpx;\n  padding: 24rpx;\n  \n  &::after { border: none; }\n  &:active { background: #FEF2F2; }\n}\n\n/* Login Modal */\n.login-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 999;\n}\n\n.login-modal {\n  width: 80%;\n  padding: 48rpx;\n}\n\n.modal-title {\n  font-size: 40rpx;\n  font-weight: 700;\n  text-align: center;\n  margin-bottom: 48rpx;\n  color: $text-main;\n}\n\n.input-field {\n  background: #F9FAFB;\n  border: 2rpx solid #E5E7EB;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-bottom: 24rpx;\n  font-size: 28rpx;\n  color: $text-main;\n  \n  &:focus {\n    border-color: $primary;\n  }\n}\n\n.full-width {\n  width: 100%;\n  margin-top: 24rpx;\n}\n\n.text-center {\n  text-align: center;\n}\n</style>\n","import MiniProgramPage from 'D:/thingsboard_envor/tea/frontend-uni/pages/profile/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getUserInfo","logout","uni"],"mappings":";;;AAyDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM,CAAC;AAAA;EAEV;AAAA,EACD,SAAS;AACP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,eAAe;AAEnB,UAAI;AACF,cAAM,MAAM,MAAMA,SAAAA;AAClB,aAAK,OAAO;AAAA,MACd,SAAS,GAAG;AAAA,MAGZ;AAAA,IACD;AAAA,IACD,MAAM,eAAe;AACnB,UAAI;AACF,cAAMC,SAAM,OAAA;AAAA,eACL,GAAG;AAAA,MAAC;AACbC,0BAAI,kBAAkB,OAAO;AAC7BA,0BAAI,kBAAkB,UAAU;AAGhCA,oBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,IAC3C;AAAA,IACD,UAAU,KAAK;AACbA,oBAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,OAAK,CAAG;AAAA,IAC5C;AAAA,EACF;AACF;;;;;;;;;;;;;;AC1FA,GAAG,WAAW,eAAe;"}