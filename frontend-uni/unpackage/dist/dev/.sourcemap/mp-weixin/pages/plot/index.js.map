{"version":3,"file":"index.js","sources":["pages/plot/index.vue","E:/EDGE‰∏ãËΩΩ/ÂéãÁº©Êñá‰ª∂/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGxvdC9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- È°∂ÈÉ®Â§ßÂõæ Header -->\n    <view class=\"hero-header\" v-if=\"garden.name\">\n      <image class=\"hero-bg\" :src=\"gardenImage\" mode=\"aspectFill\"></image>\n      <view class=\"hero-overlay\">\n        <view class=\"hero-content\">\n          <view class=\"hero-top\">\n            <view style=\"display: flex; align-items: center; gap: 12rpx;\">\n              <text class=\"hero-title\">{{ garden.name }}</text>\n              <view class=\"tag\" :class=\"gardenStatusClass\">{{ gardenStatusText }}</view>\n            </view>\n            <view class=\"btn-icon-glass\" @click=\"goEdit\">\n              ‚úé\n            </view>\n          </view>\n          <view class=\"hero-info\">\n             <text class=\"info-text\">{{ garden.company || 'Êú™ÂΩíÂ±ûÂÖ¨Âè∏' }}</text>\n             <text class=\"info-text\" v-if=\"garden.manager\"> | Ë¥üË¥£‰∫∫: {{ garden.manager }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\n    <view class=\"content-wrapper\">\n        \n        <!-- 1. ‰ΩçÁΩÆ‰∏éÂ§©Ê∞îÂç°Áâá -->\n        <view class=\"card weather-card\">\n            <view class=\"card-header-sm\">\n                <text class=\"card-title-sm\">üìç Ëå∂Âõ≠‰ΩçÁΩÆ‰∏éÂ§©Ê∞î</text>\n            </view>\n            <view class=\"weather-body\">\n                <view class=\"location-row\">\n                    <text class=\"address-text\">{{ garden.address || 'Âú∞ÂùÄÊú™ÈÖçÁΩÆ' }}</text>\n                </view>\n                <view class=\"weather-row\">\n                    <view class=\"weather-main\">\n                        <text class=\"temp\">{{ weather.temperature }}¬∞C</text>\n                        <text class=\"weather-desc\">{{ weather.weather }}</text>\n                    </view>\n                    <view class=\"weather-details\">\n                        <view class=\"detail-item\">\n                            <text class=\"label\">ÊπøÂ∫¶</text>\n                            <text class=\"val\">{{ weather.humidity }}%</text>\n                        </view>\n                        <view class=\"detail-item\">\n                            <text class=\"label\">È£éÂäõ</text>\n                            <text class=\"val\">{{ weather.windPower }}Á∫ß</text>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </view>\n\n        <!-- 2. ÁéØÂ¢ÉÁõëÊµãÊï∞ÊçÆ (ËÅöÂêà) -->\n        <view class=\"card sensor-card\">\n            <view class=\"card-header-sm\">\n                <text class=\"card-title-sm\">üå± ÁéØÂ¢ÉÁõëÊµã</text>\n                <text class=\"update-time\" v-if=\"lastUpdated\">Êõ¥Êñ∞‰∫é {{ lastUpdated }}</text>\n            </view>\n            <view class=\"sensor-grid\" v-if=\"sensorList.length > 0\">\n                <view class=\"sensor-item\" v-for=\"(item, index) in sensorList\" :key=\"index\">\n                    <text class=\"status-main\" :style=\"{ color: item.statusColor || '#333' }\">{{ item.status || 'ÁõëÊµã‰∏≠' }}</text>\n                    <view class=\"sensor-sub\">\n                         <text class=\"sensor-label\">{{ item.label }}</text>\n                         <text class=\"sensor-val-sm\">{{ item.value }}</text>\n                    </view>\n                </view>\n            </view>\n            <view class=\"empty-sensor\" v-else>\n                <text>ÊöÇÊó†ÁéØÂ¢ÉÊï∞ÊçÆ</text>\n            </view>\n        </view>\n\n        <!-- 3. AI ÂÜú‰∫ãÂª∫ËÆÆ -->\n        <view class=\"card advice-card\">\n            <view class=\"card-header-sm\">\n                <text class=\"card-title-sm\">ü§ñ AI ÂÜú‰∫ãÂª∫ËÆÆ</text>\n            </view>\n            <view class=\"advice-list\">\n                <view class=\"advice-item\" v-for=\"(item, index) in aiAdvice\" :key=\"index\" :class=\"item.type\">\n                    <text class=\"advice-icon\">{{ item.type === 'warning' ? '‚ö†Ô∏è' : 'üí°' }}</text>\n                    <text class=\"advice-text\">{{ item.text }}</text>\n                </view>\n            </view>\n        </view>\n\n        <!-- 4. ËÆæÂ§áÂàóË°® -->\n        <view class=\"section-header\">\n          <text class=\"title-md\">ËÆæÂ§áÂàóË°®</text>\n          <text class=\"text-sub\">ÂÖ± {{ devices.length }} Âè∞</text>\n        </view>\n\n        <view class=\"device-list\">\n          <view v-for=\"device in devices\" :key=\"device.id\" class=\"card device-card\" @click=\"goDeviceDetail(device.id)\">\n            <view class=\"card-header\">\n              <view class=\"header-left\">\n                <text class=\"card-title\">{{ device.name }}</text>\n                <!-- <text class=\"sn-tag\">SN: {{ device.sn }}</text> -->\n              </view>\n              <text class=\"status-text\" :class=\"deviceStatusClass(device.status)\">\n                ‚óè {{ deviceStatusText(device.status) }}\n              </text>\n            </view>\n\n            <view class=\"card-body\">\n              <view class=\"info-row\">\n                <text class=\"label\">ÊúÄÂêéÂú®Á∫øÔºö</text>\n                <text class=\"value\">{{ formatTime(device.last_time) }}</text>\n              </view>\n              <view class=\"info-row\">\n                <text class=\"label\">Â∫èÂàóÂè∑Ôºö</text>\n                <text class=\"value\">{{ device.sn }}</text>\n              </view>\n            </view>\n            \n            <!-- ÁÆÄÂçïÁöÑÊìç‰ΩúÊ†è -->\n            <view class=\"card-footer-simple\">\n                <text class=\"arrow-text\">Êü•ÁúãËØ¶ÊÉÖ ></text>\n            </view>\n          </view>\n        </view>\n        \n        <view v-if=\"devices.length === 0 && !loading\" class=\"empty-state\">\n          <image src=\"/static/empty.png\" mode=\"aspectFit\" class=\"empty-img\"></image>\n          <text class=\"empty-text\">ËØ•Ëå∂Âõ≠ÊöÇÊó†ËÆæÂ§á</text>\n        </view>\n\n    </view>\n  </view>\n</template>\n\n<script>\nimport { getGardenDetail, getGardenDevices } from '@/api/garden.js';\nimport { getLatestTelemetry } from '@/api/device.js';\nimport { getSensorRules } from '@/api/rule.js';\n\nexport default {\n  data() {\n    return {\n      gardenId: null,\n      garden: {},\n      devices: [],\n      loading: false,\n      lastUpdated: '',\n      rulesMap: {}, // key -> rule config\n      \n      // Ê®°ÊãüÂ§©Ê∞îÊï∞ÊçÆ (Âõ†‰∏∫Ê≤°ÊúâÁúüÂÆûAPI)\n      weather: {\n          temperature: '24',\n          weather: 'Â§ö‰∫ë',\n          humidity: '65',\n          windPower: '2'\n      },\n      \n      sensorList: [],\n      aiAdvice: [\n          { type: 'info', text: 'Ê≠£Âú®ÂàÜÊûêÁéØÂ¢ÉÊï∞ÊçÆ...' }\n      ]\n    };\n  },\n  computed: {\n    gardenImage() {\n      return this.garden.image_path ? (this.$baseUrl + this.garden.image_path) : '/static/garden_bg.png';\n    },\n    gardenStatusText() {\n      const status = this.garden.status || 'normal';\n      return status === 'normal' ? 'Ê≠£Â∏∏ËøêË°å' : 'ÈúÄÂÖ≥Ê≥®';\n    },\n    gardenStatusClass() {\n      const status = this.garden.status || 'normal';\n      return status === 'normal' ? 'tag-primary' : 'tag-warn';\n    }\n  },\n  onLoad(options) {\n    if (options.garden_id) {\n      this.gardenId = options.garden_id;\n      this.loadData();\n    }\n  },\n  onPullDownRefresh() {\n      this.loadData().then(() => {\n          uni.stopPullDownRefresh();\n      });\n  },\n  methods: {\n    async loadData() {\n      this.loading = true;\n      try {\n        await this.fetchRules();\n        \n        // 1. Ëé∑ÂèñÂü∫Êú¨‰ø°ÊÅØÂíåËÆæÂ§áÂàóË°®\n        const [garden, devices] = await Promise.all([\n          getGardenDetail(this.gardenId),\n          getGardenDevices(this.gardenId)\n        ]);\n        this.garden = garden;\n        this.devices = devices;\n        \n        uni.setNavigationBarTitle({ title: garden.name });\n        \n        // 2. Ëé∑Âèñ‰º†ÊÑüÂô®Êï∞ÊçÆ\n        await this.fetchSensorData(devices);\n        \n      } catch (e) {\n        console.error(e);\n        uni.showToast({ title: 'Âä†ËΩΩÂ§±Ë¥•', icon: 'none' });\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    async fetchRules() {\n        try {\n            const res = await getSensorRules();\n            if (res) {\n                res.forEach(r => {\n                    try {\n                        this.rulesMap[r.sensor_key] = JSON.parse(r.rule_config);\n                    } catch(e) {}\n                });\n            }\n        } catch(e) {\n            console.error('Fetch rules failed', e);\n        }\n    },\n    \n    computeStatus(key, value) {\n        const num = parseFloat(value);\n        if (isNaN(num)) return null;\n        \n        const config = this.rulesMap[key];\n        if (!config) return null;\n        \n        for (const rule of config) {\n            const min = rule.min !== null && rule.min !== undefined ? rule.min : -Infinity;\n            const max = rule.max !== null && rule.max !== undefined ? rule.max : Infinity;\n            \n            if (num >= min && num < max) {\n                return { label: rule.label, color: rule.color };\n            }\n        }\n        return null;\n    },\n    \n    async fetchSensorData(devices) {\n        const allSensors = [];\n        \n        const promises = devices.map(async (device) => {\n            try {\n                const telemetry = await getLatestTelemetry(device.id);\n                \n                // Ëß£ÊûêÈÖçÁΩÆ\n                let config = {};\n                try {\n                    if (device.sensor_config) {\n                        config = JSON.parse(device.sensor_config);\n                    }\n                } catch(e) {}\n                \n                // Â§ÑÁêÜÈÅ•ÊµãÊï∞ÊçÆ\n                const latestData = {};\n                if (Array.isArray(telemetry)) {\n                    telemetry.forEach(item => {\n                        if (!latestData[item.key]) latestData[item.key] = item.value;\n                    });\n                } else if (typeof telemetry === 'object') {\n                    Object.assign(latestData, telemetry);\n                }\n                \n                for (const [key, value] of Object.entries(latestData)) {\n                    if (config.__ignored && config.__ignored.includes(key)) continue;\n                    if (key === 'ts') continue;\n                    // ÁÆÄÂçïËøáÊª§‰∏Ä‰∫õÈùûÁéØÂ¢ÉÊï∞ÊçÆ\n                    if (['battery', 'signal', 'version'].includes(key)) continue;\n                    \n                    const sensorConf = config[key] || {};\n                    const name = sensorConf.name || this.formatKeyName(key);\n                    const unit = sensorConf.unit || this.guessUnit(key);\n                    \n                    const statusObj = this.computeStatus(key, value);\n                    \n                    allSensors.push({\n                        label: name,\n                        value: value + unit,\n                        rawVal: parseFloat(value), // Áî®‰∫éAIÂàÜÊûê\n                        key: key,\n                        deviceName: device.name,\n                        status: statusObj ? statusObj.label : null,\n                        statusColor: statusObj ? statusObj.color : null\n                    });\n                }\n            } catch (e) {\n                console.error(`Device ${device.id} telemetry error`, e);\n            }\n        });\n        \n        await Promise.all(promises);\n        this.sensorList = allSensors;\n        this.lastUpdated = new Date().toLocaleTimeString();\n        this.generateAiAdvice(allSensors);\n    },\n    \n    formatKeyName(key) {\n        const map = {\n            'temperature': 'Ê∏©Â∫¶',\n            'humidity': 'ÊπøÂ∫¶',\n            'soil_moisture': 'ÂúüÂ£§ÊπøÂ∫¶',\n            'light': 'ÂÖâÁÖß',\n            'co2': 'CO2ÊµìÂ∫¶'\n        };\n        return map[key] || key;\n    },\n    \n    guessUnit(key) {\n        if (key.includes('temp')) return '‚ÑÉ';\n        if (key.includes('humidity') || key.includes('moisture')) return '%';\n        if (key.includes('light')) return 'Lux';\n        return '';\n    },\n    \n    generateAiAdvice(sensors) {\n        const advice = [];\n        \n        // ÁÆÄÂçïÁöÑËßÑÂàôÂºïÊìé\n        const temp = sensors.find(s => s.key.includes('temp'));\n        const humidity = sensors.find(s => s.key.includes('humidity'));\n        const soil = sensors.find(s => s.key.includes('soil'));\n        \n        if (temp) {\n            if (temp.rawVal > 30) advice.push({ type: 'warning', text: `Ê∞îÊ∏©ËæÉÈ´ò(${temp.value})ÔºåÊ≥®ÊÑèËå∂Ê†ëÈò≤Êôí„ÄÇ` });\n            else if (temp.rawVal < 5) advice.push({ type: 'warning', text: `Ê∞îÊ∏©ËæÉ‰Ωé(${temp.value})ÔºåÊ≥®ÊÑèÈò≤ÂÜª„ÄÇ` });\n        }\n        \n        if (soil) {\n            if (soil.rawVal < 30) advice.push({ type: 'warning', text: `ÂúüÂ£§ËæÉÂπ≤(${soil.value})ÔºåÂª∫ËÆÆÁÅåÊ∫â„ÄÇ` });\n        }\n        \n        if (advice.length === 0) {\n            advice.push({ type: 'info', text: 'ÂΩìÂâçÁéØÂ¢ÉÈÄÇÂÆúÔºåËå∂Ê†ëÁîüÈïøÁä∂ÂÜµËâØÂ•Ω„ÄÇ' });\n            advice.push({ type: 'info', text: 'Âª∫ËÆÆËøõË°åÂ∏∏ËßÑÂ∑°Âõ≠Ê£ÄÊü•„ÄÇ' });\n        }\n        \n        this.aiAdvice = advice;\n    },\n\n    goEdit() {\n      uni.navigateTo({ url: `/pages/plot/edit_garden?id=${this.gardenId}` });\n    },\n    deviceStatusText(status) {\n      return status === 'online' ? 'Âú®Á∫ø' : 'Á¶ªÁ∫ø';\n    },\n    deviceStatusClass(status) {\n      return status === 'online' ? 'text-primary' : 'text-sub';\n    },\n    formatTime(time) {\n      if (!time) return '-';\n      return new Date(time).toLocaleString();\n    },\n    goDeviceDetail(id) {\n      uni.showToast({ title: 'ËÆæÂ§áËØ¶ÊÉÖÂºÄÂèë‰∏≠', icon: 'none' });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/uni.scss\";\n\n.page-container {\n  padding-bottom: 40rpx;\n  background-color: #F5F7FA;\n  min-height: 100vh;\n  width: 100%;\n  overflow-x: hidden; /* Èò≤Ê≠¢Ê∞¥Âπ≥ÊªöÂä® */\n  box-sizing: border-box;\n}\n\n/* Hero Header */\n.hero-header {\n  position: relative;\n  height: 560rpx;\n  width: 100vw;\n  margin-left: calc(50% - 50vw);\n}\n\n.hero-bg {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.hero-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  /* Âä†Ê∑±ÈÅÆÁΩ©È¢úËâ≤‰ª•Á°Æ‰øùÊñáÂ≠óÂèØËßÅ */\n  background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.8));\n  display: flex;\n  flex-direction: column;\n  justify-content: center; /* ÂûÇÁõ¥Â±Ö‰∏≠ÂÜÖÂÆπÔºåÈÅøÂÖçË¢´Â∫ïÈÉ®Âç°ÁâáÈÅÆÊå° */\n  padding: 0 32rpx 60rpx 32rpx; /* Ë∞ÉÊï¥ÂÜÖËæπË∑ù */\n}\n\n.hero-content {\n  color: #fff;\n  z-index: 1;\n}\n\n.hero-top {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n  margin-bottom: 16rpx;\n}\n\n.hero-title {\n  font-size: 40rpx;\n  font-weight: 700;\n  text-shadow: 0 2rpx 4rpx rgba(0,0,0,0.3);\n}\n\n.btn-icon-glass {\n  width: 64rpx;\n  height: 64rpx;\n  background: rgba(255,255,255,0.2);\n  backdrop-filter: blur(8px);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 32rpx;\n  border: 1rpx solid rgba(255,255,255,0.3);\n}\n\n.hero-stats {\n    font-size: 28rpx;\n    opacity: 0.95;\n    text-shadow: 0 1rpx 2rpx rgba(0,0,0,0.5);\n}\n\n.content-wrapper {\n    padding: 0 24rpx;\n    margin-top: -80rpx; /* ËÆ©Âç°Áâá‰∏äÊµÆ */\n    position: relative;\n    z-index: 10;\n    width: 100%;\n    box-sizing: border-box; /* Á°Æ‰øù padding ‰∏ç‰ºöÊíëÂ§ßÂÆΩÂ∫¶ */\n}\n\n.card {\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 24rpx;\n  margin-bottom: 24rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.04);\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.card-header-sm {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20rpx;\n    border-bottom: 1rpx solid #f0f0f0;\n    padding-bottom: 16rpx;\n}\n\n.card-title-sm {\n    font-size: 30rpx;\n    font-weight: 600;\n    color: #333;\n}\n\n.update-time {\n    font-size: 22rpx;\n    color: #999;\n}\n\n/* Weather Card */\n.weather-body {\n    padding: 10rpx 0;\n}\n.location-row {\n    margin-bottom: 24rpx;\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n}\n.address-text {\n    font-size: 28rpx;\n    color: #333;\n    font-weight: 500;\n    line-height: 1.4;\n}\n.weather-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n.weather-main {\n    display: flex;\n    align-items: baseline;\n    gap: 16rpx;\n}\n.temp {\n    font-size: 64rpx;\n    font-weight: 700;\n    color: #333;\n}\n.weather-desc {\n    font-size: 32rpx;\n    color: #666;\n}\n.weather-details {\n    display: flex;\n    gap: 30rpx;\n}\n.detail-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n.detail-item .label {\n    font-size: 22rpx;\n    color: #999;\n}\n.detail-item .val {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #333;\n}\n\n/* Sensor Grid */\n.sensor-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 20rpx;\n}\n.sensor-item {\n    background: #F9FAFB;\n    padding: 24rpx;\n    border-radius: 16rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.02);\n}\n.status-main {\n    font-size: 36rpx;\n    font-weight: 700;\n    margin-bottom: 12rpx;\n}\n.sensor-sub {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n}\n.sensor-label {\n    font-size: 24rpx;\n    color: #999;\n}\n.sensor-val-sm {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #333;\n}\n.empty-sensor {\n    text-align: center;\n    color: #999;\n    padding: 20rpx;\n    font-size: 26rpx;\n}\n\n/* Advice */\n.advice-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16rpx;\n}\n.advice-item {\n    display: flex;\n    align-items: flex-start;\n    gap: 16rpx;\n    padding: 16rpx;\n    border-radius: 12rpx;\n    font-size: 26rpx;\n    line-height: 1.5;\n}\n.advice-item.warning {\n    background: #FFF7E6;\n    color: #FA8C16;\n}\n.advice-item.info {\n    background: #F0F9FF;\n    color: #1890FF;\n}\n\n/* Device List */\n.section-header {\n  padding: 0 8rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n.title-md {\n    font-size: 32rpx;\n    font-weight: 600;\n    color: #333;\n}\n.text-sub {\n    font-size: 24rpx;\n    color: #999;\n}\n\n.device-card {\n    padding: 0;\n    overflow: hidden;\n}\n.card-header {\n  padding: 24rpx;\n  border-bottom: 1rpx solid #F3F4F6;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.card-title {\n    font-size: 30rpx;\n    font-weight: 600;\n    color: #333;\n}\n.status-text {\n  font-size: 24rpx;\n  &.text-primary { color: $primary; }\n  &.text-sub { color: $text-sub; }\n}\n.card-body {\n  padding: 24rpx;\n}\n.info-row {\n  display: flex;\n  margin-bottom: 12rpx;\n  font-size: 26rpx;\n  &:last-child { margin-bottom: 0; }\n}\n.label {\n  color: #999;\n  width: 140rpx;\n}\n.value {\n  color: #333;\n  flex: 1;\n}\n.card-footer-simple {\n    padding: 16rpx 24rpx;\n    background: #F9FAFB;\n    text-align: right;\n}\n.arrow-text {\n    font-size: 24rpx;\n    color: #999;\n}\n\n.empty-state {\n  padding: 80rpx 0;\n  text-align: center;\n}\n.empty-img {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 24rpx;\n}\n.empty-text {\n  color: #999;\n  font-size: 28rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/thingsboard_envor/tea/frontend-uni/pages/plot/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getGardenDetail","getGardenDevices","getSensorRules","getLatestTelemetry"],"mappings":"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"}