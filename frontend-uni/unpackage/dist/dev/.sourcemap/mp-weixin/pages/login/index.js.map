{"version":3,"file":"index.js","sources":["pages/login/index.vue","E:/EDGE下载/压缩文件/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <view class=\"logo-area\">\r\n      <image src=\"/static/logo.png\" mode=\"aspectFit\" class=\"logo\"></image>\r\n      <text class=\"app-name\">茶园智慧管理平台</text>\r\n      <text class=\"app-slogan\">科技赋能 · 智慧种茶</text>\r\n    </view>\r\n\r\n    <view class=\"form-area card\">\r\n      <view class=\"form-title\">欢迎登录</view>\r\n      \r\n      <view class=\"input-group\">\r\n        <text class=\"label\">账号</text>\r\n        <input class=\"input\" v-model=\"form.username\" placeholder=\"请输入用户名\" />\r\n      </view>\r\n      \r\n      <view class=\"input-group\">\r\n        <text class=\"label\">密码</text>\r\n        <input class=\"input\" v-model=\"form.password\" password placeholder=\"请输入密码\" />\r\n      </view>\r\n\r\n      <button class=\"btn-primary\" @click=\"handleLogin\" :loading=\"loading\">立即登录</button>\r\n    </view>\r\n    \r\n    <view class=\"footer\">\r\n      <text class=\"copyright\">© 2024 Tea Garden IoT</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { login } from '@/api/auth.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      loading: false\r\n    };\r\n  },\r\n  methods: {\r\n    async handleLogin() {\r\n      if (!this.form.username || !this.form.password) {\r\n        uni.showToast({ title: '请输入账号和密码', icon: 'none' });\r\n        return;\r\n      }\r\n\r\n      this.loading = true;\r\n      try {\r\n        const res = await login(this.form);\r\n        // Save token\r\n        uni.setStorageSync('token', res.token);\r\n        uni.setStorageSync('userInfo', res.userInfo); // Optional: save user info\r\n        uni.setStorageSync('roles', res.userInfo.roles || []); // Save roles\r\n        \r\n        uni.showToast({ title: '登录成功', icon: 'success' });\r\n        \r\n        // Redirect to home dashboard\r\n        setTimeout(() => {\r\n          uni.reLaunch({ url: '/pages/index/index' });\r\n        }, 1500);\r\n        \r\n      } catch (e) {\r\n        uni.showToast({ title: e.detail || '登录失败', icon: 'none' });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/uni.scss\";\r\n\r\n.login-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, $primary-light 0%, #ffffff 100%);\r\n  padding: 60rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.logo-area {\r\n  text-align: center;\r\n  margin-bottom: 80rpx;\r\n}\r\n\r\n.logo {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  margin-bottom: 24rpx;\r\n  border-radius: 32rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(16, 185, 129, 0.2);\r\n}\r\n\r\n.app-name {\r\n  display: block;\r\n  font-size: 40rpx;\r\n  font-weight: 700;\r\n  color: $primary-dark;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.app-slogan {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: $text-sub;\r\n  letter-spacing: 4rpx;\r\n}\r\n\r\n.form-area {\r\n  padding: 48rpx;\r\n}\r\n\r\n.form-title {\r\n  font-size: 36rpx;\r\n  font-weight: 700;\r\n  color: $text-main;\r\n  margin-bottom: 48rpx;\r\n  text-align: center;\r\n}\r\n\r\n.input-group {\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: $text-main;\r\n  font-weight: 600;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.input {\r\n  background: #F9FAFB;\r\n  border: 2rpx solid #E5E7EB;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  font-size: 30rpx;\r\n  color: $text-main;\r\n  transition: all 0.2s;\r\n  \r\n  &:focus {\r\n    border-color: $primary;\r\n    background: #fff;\r\n  }\r\n}\r\n\r\n.btn-primary {\r\n  margin-top: 48rpx;\r\n  width: 100%;\r\n  font-size: 32rpx;\r\n  padding: 28rpx;\r\n}\r\n\r\n.footer {\r\n  margin-top: 80rpx;\r\n  text-align: center;\r\n}\r\n\r\n.copyright {\r\n  font-size: 24rpx;\r\n  color: $text-sub;\r\n  opacity: 0.6;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/thingsboard_envor/tea/frontend-uni/pages/login/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","login"],"mappings":";;;;AAiCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,MACD,SAAS;AAAA;EAEZ;AAAA,EACD,SAAS;AAAA,IACP,MAAM,cAAc;AAClB,UAAI,CAAC,KAAK,KAAK,YAAY,CAAC,KAAK,KAAK,UAAU;AAC9CA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AACjD;AAAA,MACF;AAEA,WAAK,UAAU;AACf,UAAI;AACF,cAAM,MAAM,MAAMC,SAAAA,MAAM,KAAK,IAAI;AAEjCD,sBAAAA,MAAI,eAAe,SAAS,IAAI,KAAK;AACrCA,sBAAAA,MAAI,eAAe,YAAY,IAAI,QAAQ;AAC3CA,sBAAG,MAAC,eAAe,SAAS,IAAI,SAAS,SAAS,CAAA,CAAE;AAEpDA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAQ,CAAG;AAGhD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,QAC3C,GAAE,IAAI;AAAA,MAET,SAAS,GAAG;AACVA,4BAAI,UAAU,EAAE,OAAO,EAAE,UAAU,QAAQ,MAAM,OAAO,CAAC;AAAA,MAC3D,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;ACvEA,GAAG,WAAW,eAAe;"}