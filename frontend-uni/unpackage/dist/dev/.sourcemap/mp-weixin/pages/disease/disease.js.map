{"version":3,"file":"disease.js","sources":["pages/disease/disease.vue","E:/EDGEä¸‹è½½/å‹ç¼©æ–‡ä»¶/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGlzZWFzZS9kaXNlYXNlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <view class=\"header-box\">\n      <view class=\"title-lg\">ç—…è™«å®³æ™ºèƒ½è¯Šæ–­</view>\n      <view class=\"text-sub\" style=\"margin-top: 8rpx;\">æ‹æ‘„èŒ¶æ ‘å¶ç‰‡ï¼ŒAI å¿«é€Ÿè¯†åˆ«ç—…å®³ç±»å‹</view>\n    </view>\n\n    <!-- Upload Area -->\n    <view class=\"upload-card\" @click=\"chooseImage\">\n      <block v-if=\"filePath\">\n        <image :src=\"filePath\" mode=\"aspectFit\" class=\"preview-img\"></image>\n        <view class=\"re-upload-btn\">é‡æ–°æ‹ç…§</view>\n      </block>\n      <block v-else>\n        <view class=\"upload-placeholder\">\n          <text class=\"camera-icon\">ğŸ“¸</text>\n          <text class=\"upload-text\">ç‚¹å‡»ä¸Šä¼  / æ‹æ‘„ç…§ç‰‡</text>\n          <text class=\"upload-hint\">è¯·ç¡®ä¿å…‰çº¿å……è¶³ï¼Œç—…ç¶æ¸…æ™°</text>\n        </view>\n      </block>\n    </view>\n    \n    <!-- Upload Button -->\n    <button v-if=\"filePath && !uploading && !result\" class=\"btn-primary full-btn\" @click.stop=\"upload\">å¼€å§‹è¯Šæ–­</button>\n    <button v-if=\"uploading\" class=\"btn-primary full-btn disabled\" disabled>æ­£åœ¨åˆ†æ...</button>\n\n    <!-- Result Card -->\n    <view v-if=\"result\" class=\"card result-card\">\n      <view class=\"result-header\">\n        <text class=\"result-title\">è¯Šæ–­ç»“æœ</text>\n        <view class=\"confidence-tag\">å¯ä¿¡åº¦ {{ (result.confidence * 100).toFixed(1) }}%</view>\n      </view>\n      \n      <view class=\"result-row\">\n        <text class=\"label\">ç—…å®³ç±»å‹ï¼š</text>\n        <text class=\"value highlight\">{{ result.disease_type }}</text>\n      </view>\n      \n      <view class=\"divider\"></view>\n      \n      <view class=\"advice-section\">\n        <text class=\"label\">é˜²æ²»å»ºè®®ï¼š</text>\n        <text class=\"advice-text\">{{ result.advice }}</text>\n      </view>\n    </view>\n    \n    <view v-if=\"error\" class=\"error-msg\">{{ error }}</view>\n  </view>\n</template>\n\n<script>\nimport { detectDisease } from '@/api/disease.js';\n\nexport default {\n  data() {\n    return {\n      filePath: '',\n      result: null,\n      uploading: false,\n      error: '',\n    };\n  },\n  methods: {\n    chooseImage() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        success: (res) => {\n          this.filePath = res.tempFilePaths[0];\n          this.result = null; // Clear previous result\n          this.error = '';\n        },\n        fail: () => {\n          // User cancelled\n        },\n      });\n    },\n    async upload() {\n      if (!this.filePath) return;\n      this.uploading = true;\n      this.error = '';\n      try {\n        const res = await detectDisease(this.filePath);\n        this.result = res;\n      } catch (e) {\n        this.error = 'è¯†åˆ«å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–é‡è¯•';\n      } finally {\n        this.uploading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/uni.scss\";\n\n.page-container {\n  padding: 24rpx;\n}\n\n.header-box {\n  margin-bottom: 40rpx;\n}\n\n.upload-card {\n  background: #fff;\n  border: 4rpx dashed #D1D5DB;\n  border-radius: 24rpx;\n  height: 400rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 32rpx;\n  position: relative;\n  overflow: hidden;\n  \n  &:active {\n    background: #F9FAFB;\n  }\n}\n\n.upload-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.camera-icon {\n  font-size: 80rpx;\n  margin-bottom: 16rpx;\n  opacity: 0.6;\n}\n\n.upload-text {\n  font-size: 30rpx;\n  color: $text-main;\n  font-weight: 600;\n}\n\n.upload-hint {\n  font-size: 24rpx;\n  color: $text-sub;\n  margin-top: 8rpx;\n}\n\n.preview-img {\n  width: 100%;\n  height: 100%;\n}\n\n.re-upload-btn {\n  position: absolute;\n  bottom: 24rpx;\n  right: 24rpx;\n  background: rgba(0,0,0,0.6);\n  color: #fff;\n  font-size: 24rpx;\n  padding: 8rpx 20rpx;\n  border-radius: 99rpx;\n}\n\n.full-btn {\n  width: 100%;\n  margin-bottom: 40rpx;\n  \n  &.disabled {\n    background: #9CA3AF;\n  }\n}\n\n.result-card {\n  padding: 32rpx;\n  animation: slideUp 0.3s ease-out;\n}\n\n@keyframes slideUp {\n  from { transform: translateY(20rpx); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24rpx;\n}\n\n.result-title {\n  font-size: 32rpx;\n  font-weight: 700;\n  color: $text-main;\n}\n\n.confidence-tag {\n  background: $primary-light;\n  color: $primary-dark;\n  font-size: 22rpx;\n  padding: 4rpx 16rpx;\n  border-radius: 8rpx;\n  font-weight: 600;\n}\n\n.result-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16rpx;\n}\n\n.label {\n  font-size: 28rpx;\n  color: $text-sub;\n  width: 160rpx;\n}\n\n.value {\n  font-size: 30rpx;\n  color: $text-main;\n  font-weight: 500;\n  \n  &.highlight {\n    color: $danger;\n    font-weight: 700;\n    font-size: 32rpx;\n  }\n}\n\n.divider {\n  height: 2rpx;\n  background: #F3F4F6;\n  margin: 24rpx 0;\n}\n\n.advice-section {\n  display: flex;\n  flex-direction: column;\n}\n\n.advice-text {\n  margin-top: 12rpx;\n  font-size: 28rpx;\n  color: $text-main;\n  line-height: 1.6;\n  background: #F9FAFB;\n  padding: 16rpx;\n  border-radius: 12rpx;\n}\n\n.error-msg {\n  text-align: center;\n  color: $danger;\n  font-size: 26rpx;\n  margin-top: 20rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/thingsboard_envor/tea/frontend-uni/pages/disease/disease.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","detectDisease"],"mappings":";;;AAqDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,WAAW;AAAA,MACX,OAAO;AAAA;EAEV;AAAA,EACD,SAAS;AAAA,IACP,cAAc;AACZA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,SAAS,CAAC,QAAQ;AAChB,eAAK,WAAW,IAAI,cAAc,CAAC;AACnC,eAAK,SAAS;AACd,eAAK,QAAQ;AAAA,QACd;AAAA,QACD,MAAM,MAAM;AAAA,QAEX;AAAA,MACH,CAAC;AAAA,IACF;AAAA,IACD,MAAM,SAAS;AACb,UAAI,CAAC,KAAK;AAAU;AACpB,WAAK,YAAY;AACjB,WAAK,QAAQ;AACb,UAAI;AACF,cAAM,MAAM,MAAMC,YAAAA,cAAc,KAAK,QAAQ;AAC7C,aAAK,SAAS;AAAA,MAChB,SAAS,GAAG;AACV,aAAK,QAAQ;AAAA,MACf,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FA,GAAG,WAAW,eAAe;"}