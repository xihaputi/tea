"use strict";const e=require("./vendor.js"),t="http://116.62.25.191:1112/api",o=(o,a,s={})=>new Promise(((n,i)=>{const d=e.index.getStorageSync("token"),r={};d&&(r.Authorization=d),e.index.request({url:`${t}${a}`,method:o,data:s,header:r,success:t=>{t.statusCode>=200&&t.statusCode<300?n(t.data):401===t.statusCode?(e.index.removeStorageSync("token"),e.index.showToast({title:"????",icon:"none"}),i(t)):i(t)},fail:i})})),a={get:(e,t)=>o("GET",e,t),post:(e,t)=>o("POST",e,t),put:(e,t)=>o("PUT",e,t),delete:(e,t)=>o("DELETE",e,t),upload:(o,a,s="file",n={})=>new Promise(((i,d)=>{const r=e.index.getStorageSync("token"),u={};r&&(u.Authorization=r),e.index.uploadFile({url:`${t}${o}`,filePath:a,name:s,formData:n,header:u,success:e=>{e.statusCode>=200&&e.statusCode<300?i(JSON.parse(e.data)):d(e)},fail:d})}))};exports.api=a;
