"use strict";const e=require("../../common/vendor.js"),o=require("../../api/auth.js"),s={data:()=>({user:{}}),onShow(){this.loadUserInfo()},methods:{async loadUserInfo(){try{const e=await o.getUserInfo();this.user=e}catch(e){}},async handleLogout(){try{await o.logout()}catch(s){}e.index.removeStorageSync("token"),e.index.removeStorageSync("userInfo"),e.index.reLaunch({url:"/pages/login/index"})},showToast(o){e.index.showToast({title:o,icon:"none"})}}};const t=e._export_sfc(s,[["render",function(o,s,t,n,r,a){return{a:e.t(r.user.name?r.user.name[0]:r.user.username?r.user.username[0]:"U"),b:e.t(r.user.name||r.user.username),c:e.t(r.user.roles?r.user.roles.join(", "):"普通用户"),d:e.o((e=>a.showToast("编辑功能开发中"))),e:e.o((e=>a.showToast("账号安全功能开发中"))),f:e.o((e=>a.showToast("系统设置功能开发中"))),g:e.o((e=>a.showToast("关于我们功能开发中"))),h:e.o(((...e)=>a.handleLogout&&a.handleLogout(...e)))}}],["__scopeId","data-v-01e0070c"]]);wx.createPage(t);
