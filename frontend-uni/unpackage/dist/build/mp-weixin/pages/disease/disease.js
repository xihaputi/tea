"use strict";const e=require("../../common/vendor.js"),t=require("../../api/disease.js"),s={data:()=>({filePath:"",result:null,uploading:!1,error:""}),methods:{chooseImage(){e.index.chooseImage({count:1,sizeType:["compressed"],success:e=>{this.filePath=e.tempFilePaths[0],this.result=null,this.error=""},fail:()=>{}})},async upload(){if(this.filePath){this.uploading=!0,this.error="";try{const e=await t.detectDisease(this.filePath);this.result=e}catch(e){this.error="识别失败，请检查网络或重试"}finally{this.uploading=!1}}}}};const i=e._export_sfc(s,[["render",function(t,s,i,r,a,o){return e.e({a:a.filePath},a.filePath?{b:a.filePath}:{},{c:e.o(((...e)=>o.chooseImage&&o.chooseImage(...e))),d:a.filePath&&!a.uploading&&!a.result},!a.filePath||a.uploading||a.result?{}:{e:e.o(((...e)=>o.upload&&o.upload(...e)))},{f:a.uploading},(a.uploading,{}),{g:a.result},a.result?{h:e.t((100*a.result.confidence).toFixed(1)),i:e.t(a.result.disease_type),j:e.t(a.result.advice)}:{},{k:a.error},a.error?{l:e.t(a.error)}:{})}],["__scopeId","data-v-8d1bbe19"]]);wx.createPage(i);
