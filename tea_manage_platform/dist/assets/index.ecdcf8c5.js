import{b as e,c as a,d as t}from"./index.e41e9f95.js";import{e as l,f as s,g as r,r as n,$ as i,o,i as c,a as d,w as u,j as p,l as y,k as f,c as w,q as g,m as _,E as k}from"./vendor.da7b8729.js";const v={class:"app-container"},h={class:"flex justify-between"},b={class:"mt-4 flex justify-end"},m={__name:"index",setup(m){const x=l(!1),C=l([]),j=l(0),N=s({page:1,size:10}),q=async()=>{x.value=!0;try{const a=await e(N);C.value=a.list||[],j.value=a.total||0}catch(a){console.error(a)}finally{x.value=!1}};return r((()=>{q()})),(e,l)=>{const s=n("el-button"),r=n("el-tag"),m=n("el-table-column"),z=n("el-table"),D=n("el-pagination"),E=n("el-card"),L=i("loading");return o(),c("div",v,[d(E,null,{header:u((()=>[p("div",h,[l[2]||(l[2]=p("span",null,"告警记录",-1)),d(s,{icon:"Refresh",onClick:q},{default:u((()=>[...l[1]||(l[1]=[y("刷新",-1)])])),_:1})])])),default:u((()=>[f((o(),w(z,{data:C.value},{default:u((()=>[d(m,{prop:"severity",label:"级别",width:"100"},{default:u((({row:e})=>["critical"===e.severity?(o(),w(r,{key:0,type:"danger"},{default:u((()=>[...l[3]||(l[3]=[y("严重",-1)])])),_:1})):"warning"===e.severity?(o(),w(r,{key:1,type:"warning"},{default:u((()=>[...l[4]||(l[4]=[y("警告",-1)])])),_:1})):(o(),w(r,{key:2,type:"info"},{default:u((()=>[...l[5]||(l[5]=[y("信息",-1)])])),_:1}))])),_:1}),d(m,{prop:"content",label:"告警内容","min-width":"300"}),d(m,{prop:"deviceName",label:"关联设备",width:"180"}),d(m,{prop:"created_at",label:"发生时间",width:"180"},{default:u((({row:e})=>[y(g(new Date(e.created_at).toLocaleString()),1)])),_:1}),d(m,{prop:"status",label:"状态",width:"100"},{default:u((({row:e})=>["active"===e.status?(o(),w(r,{key:0,type:"danger"},{default:u((()=>[...l[6]||(l[6]=[y("激活",-1)])])),_:1})):"acknowledged"===e.status?(o(),w(r,{key:1,type:"warning"},{default:u((()=>[...l[7]||(l[7]=[y("已确认",-1)])])),_:1})):(o(),w(r,{key:2,type:"success"},{default:u((()=>[...l[8]||(l[8]=[y("已清除",-1)])])),_:1}))])),_:1}),d(m,{prop:"handlerName",label:"处理人",width:"120"},{default:u((({row:e})=>[y(g(e.handlerName||"-"),1)])),_:1}),d(m,{label:"操作",width:"200",fixed:"right"},{default:u((({row:e})=>["active"===e.status?(o(),w(s,{key:0,link:"",type:"primary",onClick:t=>(async e=>{try{await a(e.id),k.success("已确认"),q()}catch(t){console.error(t)}})(e)},{default:u((()=>[...l[9]||(l[9]=[y("确认",-1)])])),_:1},8,["onClick"])):_("",!0),"cleared"!==e.status?(o(),w(s,{key:1,link:"",type:"success",onClick:a=>(async e=>{try{await t(e.id),k.success("已清除"),q()}catch(a){console.error(a)}})(e)},{default:u((()=>[...l[10]||(l[10]=[y("清除",-1)])])),_:1},8,["onClick"])):_("",!0)])),_:1})])),_:1},8,["data"])),[[L,x.value]]),p("div",b,[d(D,{background:"",layout:"prev, pager, next",total:j.value,"current-page":N.page,"onUpdate:currentPage":l[0]||(l[0]=e=>N.page=e),onCurrentChange:q},null,8,["total","current-page"])])])),_:1})])}}};export{m as default};
